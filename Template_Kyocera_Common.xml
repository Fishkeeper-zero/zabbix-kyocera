<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-04-13T19:11:55Z</date>
    <groups>
        <group>
            <name>Kyocera Ecosys M2040dn</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template_Kyocera_Common</template>
            <name>Template_Kyocera_Common</name>
            <groups>
                <group>
                    <name>Kyocera Ecosys M2040dn</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Kyocera_Inventory_Print</name>
                </application>
                <application>
                    <name>Kyocera_Monitoring_Print</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Отпечатано страниц А4</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.1347.42.2.1.1.1.6.1.1</snmp_oid>
                    <key>a4.device</key>
                    <delay>1800</delay>
                    <trends>184d</trends>
                    <applications>
                        <application>
                            <name>Kyocera_Monitoring_Print</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Отпечатано страниц всего</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.1347.43.10.1.1.12.1.1</snmp_oid>
                    <key>a4total.device</key>
                    <delay>1800</delay>
                    <trends>184d</trends>
                    <applications>
                        <application>
                            <name>Kyocera_Monitoring_Print</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Версия программного обеспеченгия</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.1347.43.5.4.1.5.1.1</snmp_oid>
                    <key>firmware.device</key>
                    <delay>86400</delay>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <inventory_link>SOFTWARE</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Статус принтера_код</name>
                    <type>SNMPV2</type>
                    <snmp_community>public</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.1347.43.18.2.1.3.1.1</snmp_oid>
                    <key>kcprtAlertStateCod</key>
                    <delay>30</delay>
                    <trends>184d</trends>
                    <applications>
                        <application>
                            <name>Kyocera_Monitoring_Print</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>Kyocera_MFD_Value</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{last()}=42001</expression>
                            <name>Замятие бумаги</name>
                            <opdata>{ITEM.LASTVALUE}</opdata>
                            <priority>WARNING</priority>
                        </trigger>
                        <trigger>
                            <expression>{count(5m,44001)}&gt;=3&#13;
and&#13;
{now()}&gt;0</expression>
                            <name>требует внимания (открыта передняя крышка)</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Статус принтера_дисплей</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.1347.43.18.2.1.2.1.1</snmp_oid>
                    <key>kcprtAlertStateDisplay</key>
                    <delay>30</delay>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <applications>
                        <application>
                            <name>Kyocera_Monitoring_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <params>var preStr = ''; var preStrAr = value.split(&quot; &quot;); for (var j = 0; j &lt; preStrAr.length; j++) { preStr += String.fromCharCode(parseInt(preStrAr[j], 16)); } var result = &quot;&quot;; var i = 0; var c = c1 = c2 = 0; while (i &lt; preStr.length) { c = preStr.charCodeAt(i); if (c &lt; 128) { result += String.fromCharCode(c); i++; } else if ((c &gt; 191) &amp;&amp; (c &lt; 224)) { c2 = preStr.charCodeAt(i + 1); result += String.fromCharCode(((c &amp; 31) &lt;&lt; 6) | (c2 &amp; 63)); i += 2; } else { c2 = preStr.charCodeAt(i + 1); c3 = preStr.charCodeAt(i + 2); result += String.fromCharCode(((c &amp; 15) &lt;&lt; 12) | ((c2 &amp; 63) &lt;&lt; 6) | (c3 &amp; 63)); i += 3; } } return result;</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>MAC address</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.2.2.1.6.1</snmp_oid>
                    <key>Ky.ifPhysAddress</key>
                    <delay>86400</delay>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <inventory_link>MACADDRESS_A</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Модель</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.25.3.2.1.3.1</snmp_oid>
                    <key>model.device</key>
                    <delay>86400</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>MODEL</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                        <step>
                            <type>LTRIM</type>
                            <params>ECOSYS </params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Количество тонера</name>
                    <type>CALCULATED</type>
                    <key>Persent</key>
                    <delay>10m</delay>
                    <trends>184d</trends>
                    <units>%</units>
                    <params>100*last(&quot;tonergramms.device&quot;)/last(&quot;tonerboxpages.device&quot;)</params>
                    <applications>
                        <application>
                            <name>Kyocera_Monitoring_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED</type>
                            <params/>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Серийный номер</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.1347.43.5.1.1.28.1</snmp_oid>
                    <key>sn.device</key>
                    <delay>86400</delay>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <inventory_link>SERIALNO_A</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Имя устройства</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.1.5.0</snmp_oid>
                    <key>sysName.0</key>
                    <delay>86400;wd1h12m00</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>NAME</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>Модель картриджа</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.43.11.1.1.6.1.1</snmp_oid>
                    <key>tonerbox.device</key>
                    <delay>1440m;wd1h2m00</delay>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <inventory_link>TYPE_FULL</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Ресурс картриджа</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.43.11.1.1.8.1.1</snmp_oid>
                    <key>tonerboxpages.device</key>
                    <delay>86400</delay>
                    <trends>184d</trends>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Остаток тонера в картридже</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.43.11.1.1.9.1.1</snmp_oid>
                    <key>tonergramms.device</key>
                    <delay>5m</delay>
                    <trends>184d</trends>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED</type>
                            <params/>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>Время Uptime</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.1.3.0</snmp_oid>
                    <key>uptime.device</key>
                    <delay>60</delay>
                    <trends>184d</trends>
                    <units>uptime</units>
                    <applications>
                        <application>
                            <name>Kyocera_Monitoring_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.01</params>
                        </step>
                    </preprocessing>
                    <triggers>
                        <trigger>
                            <expression>{nodata(30m)}=1</expression>
                            <name>Устройство недоступно</name>
                            <priority>DISASTER</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Расположение</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.1.6.0</snmp_oid>
                    <key>whereis.device</key>
                    <delay>86400</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>LOCATION</inventory_link>
                    <applications>
                        <application>
                            <name>Kyocera_Inventory_Print</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>86400</params>
                        </step>
                    </preprocessing>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$SNMP_COMMUNITY}</macro>
                    <value>public</value>
                </macro>
            </macros>
        </template>
    </templates>
    <value_maps>
        <value_map>
            <name>Kyocera_MFD_Value</name>
            <mappings>
                <mapping>
                    <value>10001</value>
                    <newvalue>Готов к работе</newvalue>
                </mapping>
                <mapping>
                    <value>35078</value>
                    <newvalue>Режим ожидания</newvalue>
                </mapping>
                <mapping>
                    <value>44001</value>
                    <newvalue>Закройте переднюю крышку.</newvalue>
                </mapping>
                <mapping>
                    <value>420001</value>
                    <newvalue>Замятие</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
